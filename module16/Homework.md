# Homework 16

## Task

Напишите структуру, которая будет реализовывать клиент для клиента банковского приложения.
Этот клиент должен реализовывать следующий интерфейс:

```go
type BankClient interface {
// Deposit deposits given amount to clients account
Deposit(amount int)

// Withdrawal withdraws given amount from clients account. 
// return error if clients balance less the withdrawal amount 
Withdrawal(amount int) error

// Balance returns clients balance
Balance() int
}
```

Используя этот клиент, создайте консольное приложение, которое:

1. В момент старта запускает 10 горутин, каждая из которых с промежутком от 0.5 секунд до 1 секунды зачисляет на счёт
   клиента случайную сумму от 1 до 10.
2. Так же запускается 5 горутин, которые с промежутком 0.5 секунд до 1 секунды снимают с клиента случайную сумму
   от 1 до 5. Если снятие невозможно, в консоль выводится сообщение об ошибке, и приложение продолжает работу.
3. Если пользователь введет в консоль слово balance — приложение выведет в консоль текущий баланс клиента.
4. deposit — запрашивается сумма (целое число) — которая добавляется на счёт пользователя
5. withdrawal — запрашивается сумма (целое число) — которая выводится со счёта пользователя.
   Если запрашиваемая сумма больше текущего баланса пользователя, то пользователю должно быть показано сообщение о том,
   что его баланс недостаточен (и, очевидно, операция не должна быть выполнена).
6. Если пользователь введет слово exit — приложение завершит работу.
7. При вводе любой другой команды приложение выведет сообщение
   "Unsupported command. You can use commands: balance, deposit, withdrawal, exit".

## Solution

[Решение находится здесь!](https://github.com/MoJIoToK/learning_go/blob/master/module16/BankApp.go)

1. Функция `menu()` отображает пользовательское меню, а также отвечает за взаимодействие с пользователем.
   Взаимодействие происходит путем чтения из консоли, с помощью `bufio.NewScanner(os.Stdin)` в бесконечном цикле,
   команд. Всего присутствует 4 команды, им присвоен тип `BankCommand` и они вынесены в константы. В зависимости от
   введенной команды, происходит вызов соответствующего метода структуры `Client`. При вводе команд `depositCommand`
   или `withdrawalCommand` происходит вызов функции `scan()`.
2. Функция `scan()` в качестве аргумента принимает экземляр сканера `scanner` из пакета `bufio.NewScanner(os.Stdin)`.
   Данная функция необходима для чтения и проверки что введено именно число, при запросе суммы пополнения/списания. Если
   всё введено корректно, возвращается сумма. Если введеное число некорректно, то возвращается ошибка.
3. Функция `enterCommand()` второстепенная и отвечает за печать приглашения к вводу команды.

## Improvements

В качестве улучшений может быть реализовано следующее:

1. Разделение кода на функциональные блоки. На данный момент вся логика сконцентирована в функции `main()`, что мне
   видится неправильным. Однако, на данный момент, я не придумал ничего лучше. 